# CI Agile & TeamWorks - Architecture Documentation

## Overview

This repository contains TWO subsites unified in a single React codebase:
1. **CI Agile Main Site** - Enterprise transformation services
2. **TeamWorks** - SME team training programs

Both sites are built using React for development and exported to pure static HTML/CSS/JS for deployment on Hostinger shared hosting.

## Directory Structure

```
/src
├── /main-site              # CI Agile main site
│   ├── /pages              # Main site page components
│   │   ├── IndexPage.tsx
│   │   ├── AboutUsPage.tsx
│   │   └── ContactUsPage.tsx
│   └── /components         # Main site components
│       ├── MainSiteNav.tsx
│       └── MainSiteFooter.tsx
│
├── /teamworks              # TeamWorks training site
│   ├── /pages              # TeamWorks page components
│   │   ├── LandingPage.tsx
│   │   ├── CreatingSuperTeamsPage.tsx
│   │   ├── DesignLikeApplePage.tsx
│   │   ├── OperationalExcellencePage.tsx
│   │   └── BookConsultationPage.tsx
│   └── /components         # TeamWorks components (re-exports from app/components)
│       └── v2/             # V2 components
│
├── /app                    # Original TeamWorks implementation (transitional)
│   ├── App.tsx             # Preview router for development
│   ├── /components         # Shared component implementations
│   └── /pages              # Original page structure (being migrated)
│
├── /imports                # Figma-imported components
│   ├── CiAgileMainEthanWorkingMergeBranch.tsx
│   └── svg-*.ts            # SVG path data
│
├── /shared                 # Truly shared utilities (minimal)
│   └── ImageWithFallback.tsx
│
└── /styles                 # Global styles
    ├── fonts.css
    └── theme.css
```

## Build Pipeline

### Development
```bash
npm run dev
```
- Runs Vite dev server
- Hot reload enabled
- React Router for preview navigation
- Access at http://localhost:5173

### Production Build
```bash
npm run build
```
- Executes `/scripts/export-static.mjs`
- Generates static HTML files in `/public` directory
- Server-side renders all React components to HTML
- Outputs:
  - `/public/index.html` (main site)
  - `/public/aboutus.html` (main site)
  - `/public/contactus.html` (main site)
  - `/public/teamworks/index.html` (TeamWorks)
  - `/public/teamworks/creating-super-teams.html`
  - `/public/teamworks/design-thinking.html`
  - `/public/teamworks/critical-thinking-kanban.html`
  - `/public/teamworks/bookConsultation.html`
  - `/public/css/style.css`
  - `/public/js/main.js`
  - `/public/js/form.js`

## Style Isolation

To prevent CSS bleed between the two sites, each site wraps its content in a namespace div:

### Main Site Pages
```tsx
<div className="site-main">
  {/* Main site content */}
</div>
```

### TeamWorks Pages
```tsx
<div className="site-teamworks">
  {/* TeamWorks content */}
</div>
```

Custom CSS in `/public/css/style.css` can target these namespaces to prevent style conflicts.

## URL Structure

### Main Site
- `/index.html` - Homepage
- `/aboutus.html` - About Us
- `/contactus.html` - Contact Us

### TeamWorks
- `/teamworks/index.html` - Program landing page
- `/teamworks/creating-super-teams.html` - Course 01
- `/teamworks/design-thinking.html` - Course 02
- `/teamworks/critical-thinking-kanban.html` - Course 03
- `/teamworks/bookConsultation.html` - Consultation form

## Navigation Between Sites

### From Main Site to TeamWorks
```html
<a href="teamworks/index.html">TeamWorks</a>
```

### From TeamWorks to Main Site
```html
<a href="../index.html">Home</a>
<a href="../aboutus.html">About Us</a>
<a href="../contactus.html">Contact</a>
```

### Within TeamWorks
```html
<a href="creating-super-teams.html">Course 01</a>
<a href="bookConsultation.html">Book Consultation</a>
```

## Important Rules

### FROZEN Components (Do Not Modify Without Explicit Instruction)
- `/src/app/components/BookConsultationPage.tsx` - Form logic frozen
- `/src/app/components/CoursePage.tsx` - Course 01 frozen
- `/src/app/components/Course02Page.tsx` - Course 02 frozen
- `/src/app/components/Course03Page.tsx` - Course 03 frozen
- `/src/app/components/v2/FooterV2.tsx` - Footer frozen
- `/src/app/components/v2/NavigationV2.tsx` - Navbar frozen

### FROZEN Architecture
- `/scripts/export-static.mjs` - Build pipeline (modify with caution)
- Form submission logic in `/public/js/form.js`
- Asset handling (figma:asset imports)

### Critical Guidelines
1. **NO manual HTML files** - All HTML generated by build script
2. **NO /public directory in source** - Only created during build
3. **ALL links must be RELATIVE** - No leading `/`
4. **NO React Router** - Pure static site
5. **NO figma:asset in new code** - Use regular imports for new images

## Deployment Workflow

### 1. Development
Work on React source files in `/src`

### 2. Build
```bash
npm run build
```
Generates `/public` directory

### 3. Deploy to Hostinger
```bash
# Copy contents of /public to hostinger branch root
git checkout hostinger
cp -r public/* .
git add .
git commit -m "Deploy: [description]"
git push origin hostinger
```

Hostinger Git Tool will deploy the `hostinger` branch contents directly into `public_html`.

## Form Submission

The TeamWorks consultation form (`/teamworks/bookConsultation.html`) submits data to Google Sheets via Google Apps Script.

### Google Apps Script Endpoint
Configure in `/public/js/form.js`:
```javascript
const FORM_ENDPOINT = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';
```

### Field Names (Exact)
- `fullName`
- `workEmail`
- `companyName`
- `teamSize`
- `deliveryFormat`
- `outcomes` (comma-separated)
- `contactMethod`
- `pageUrl`
- `referrer`
- `timestamp`

### Submission Method
- Form-encoded POST (NOT JSON)
- Uses URLSearchParams
- 5-second redirect to index.html on success

## Adding New Pages

### Main Site Page
1. Create `/src/main-site/pages/NewPage.tsx`
2. Wrap in `<div className="site-main">`
3. Add to export-static.mjs pages array
4. Update navigation in MainSiteNav.tsx

### TeamWorks Page
1. Create `/src/teamworks/pages/NewPage.tsx`
2. Wrap in `<div className="site-teamworks">`
3. Add to export-static.mjs pages array
4. Update navigation in NavigationV2.tsx

## Troubleshooting

### Build fails with "Component not found"
- Check import paths use correct aliases (@/main-site, @/teamworks, @/shared)
- Verify component is exported properly

### Links not working
- Ensure all links are RELATIVE (no leading `/`)
- Check file actually exists in /public after build

### Styles bleeding between sites
- Verify namespace wrapper is present
- Check CSS selectors target correct namespace

### Form not submitting
- Verify FORM_ENDPOINT is configured
- Check field names match exactly
- Inspect browser console for errors

## Version Control

### Main Branch
- Contains all source code
- Never contains `/public` or `/dist`
- Development happens here

### Hostinger Branch
- Contains ONLY built static files
- Should mirror `/public` directory contents
- Deployed directly to Hostinger

### .gitignore
```
node_modules/
dist/
public/
.env
```

## Tech Stack

### Development
- React 18.3.1
- Vite 6.3.5
- Tailwind CSS 4.1.12
- TypeScript (via TSX files)

### Production
- Pure HTML
- Pure CSS (no preprocessor)
- Pure JavaScript (ES6+)
- Tailwind CSS via CDN
- Lucide icons via CDN

## Support

For questions or issues:
- Check this documentation first
- Review Guidelines.md for project-specific rules
- Consult export-static.mjs for build logic
